(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(H){H.exports={container:"container___1sYa-",containerBg:"containerBg___277J2",content:"content___2zk1-",title:"title___1-xuF",codeImg:"codeImg___12G3s"}},32384:function(){},1294:function(H,T,a){"use strict";a.r(T),a.d(T,{default:function(){return je}});var Ee=a(13062),Q=a(71230),Le=a(89032),$=a(15746),Fe=a(34792),w=a(48086),E=a(8870),I=a(3182),B=a(2824),Ze=a(17462),X=a(76772),k=a(94043),x=a.n(k),L=a(28991),l=a(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},_=q,A=a(27029),G=function(e,r){return l.createElement(A.Z,(0,L.Z)((0,L.Z)({},e),{},{ref:r,icon:_}))};G.displayName="LockOutlined";var ee=l.forwardRef(G),te={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},re=te,K=function(e,r){return l.createElement(A.Z,(0,L.Z)((0,L.Z)({},e),{},{ref:r,icon:re}))};K.displayName="SafetyOutlined";var ne=l.forwardRef(K),ae=a(89366),Pe=a(84305),se=a(69224),ie=a(5894),le=a(13717),Ne=a(32384),oe=["logo","message","title","subTitle","actions","children"];function U(){return U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U.apply(this,arguments)}function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y(Object(r),!0).forEach(function(n){ce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ce(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fe(t,e){if(t==null)return{};var r=ge(t,e),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(s=0;s<u.length;s++)n=u[s],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}function ge(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,u;for(u=0;u<n.length;u++)s=n[u],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function de(t){var e=t.logo,r=t.message,n=t.title,s=t.subTitle,u=t.actions,Z=t.children,P=fe(t,oe),V=(0,le.YB)(),D=ue({searchConfig:{submitText:V.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(b,j){return j.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},P.submitter),N=(0,l.useContext)(se.ZP.ConfigContext),R=N.getPrefixCls("pro-form-login"),c=function(b){return"".concat(R,"-").concat(b)},S=(0,l.useMemo)(function(){return e?typeof e=="string"?l.createElement("img",{src:e}):e:null},[e]);return l.createElement("div",{className:c("container")},l.createElement("div",{className:c("top")},n||S?l.createElement("div",{className:c("header")},S?l.createElement("span",{className:c("logo")},S):null,n?l.createElement("span",{className:c("title")},n):null):null,s?l.createElement("div",{className:c("desc")},s):null),l.createElement("div",{className:c("main")},l.createElement(ie.Z,U({isKeyPressSubmit:!0,submitter:D},P),r,Z),u?l.createElement("div",{className:c("other")},u):null))}var me=de,z=a(5966),y=a(21010),ve=a(28318),d=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},F=function(){return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()},he=function(e){return{NODE_ENV:"production"}.IMAGE_URL?{NODE_ENV:"production"}.IMAGE_URL+e:e},be=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"yyyy-MM-dd HH:mm:ss";if(!!e){e=new Date(e);var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in n)new RegExp("("+s+")").test(r)&&(r=r.replace(RegExp.$1,RegExp.$1.length===1?n[s]:("00"+n[s]).substr((""+n[s]).length)));return r}},pe=a(34687),O=a.n(pe),i=a(85893),ye=function(e){var r=e.content;return(0,i.jsx)(X.Z,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},Oe=function(){var e=(0,l.useState)(""),r=(0,B.Z)(e,2),n=r[0],s=r[1],u=(0,l.useState)(""),Z=(0,B.Z)(u,2),P=Z[0],V=Z[1],D=(0,l.useState)({}),N=(0,B.Z)(D,2),R=N[0],c=N[1],S=(0,y.tT)("@@initialState"),M=S.initialState,b=S.setInitialState,j=(0,y.YB)(),xe=function(){var m=(0,I.Z)(x().mark(function v(){var h,g;return x().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,M==null||(h=M.fetchUserInfo)===null||h===void 0?void 0:h.call(M);case 2:if(g=f.sent,!g){f.next=6;break}return f.next=6,b(function(C){return(0,E.Z)((0,E.Z)({},C),{},{currentUser:g.user,currentRoles:g.roles})});case 6:case"end":return f.stop()}},v)}));return function(){return m.apply(this,arguments)}}(),Se=function(){var m=(0,I.Z)(x().mark(function v(h){var g,p,f,C,W,J;return x().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,ve.x4)((0,E.Z)((0,E.Z)({},h),{},{key:n}));case 3:if(g=o.sent,!g.success){o.next=15;break}return p=j.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),w.default.success(p),o.next=9,xe();case 9:if(y.m8){o.next=11;break}return o.abrupt("return");case 11:return f=y.m8.location.query,C=f,W=C.redirect,y.m8.push(W||"/"),o.abrupt("return");case 15:c(g),s(F()),o.next=24;break;case 19:o.prev=19,o.t0=o.catch(0),J=j.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),w.default.error(J),s(F());case 24:case"end":return o.stop()}},v,null,[[0,19]])}));return function(h){return m.apply(this,arguments)}}();(0,l.useEffect)(function(){s(F())},[]),(0,l.useEffect)(function(){var m="/user/sendImgVifCode?key=".concat(n);V(he(m))},[n]);var Me=R.success;return(0,i.jsxs)("div",{className:O().container,children:[(0,i.jsx)("div",{className:O().containerBg}),(0,i.jsx)("div",{className:O().content,children:(0,i.jsxs)(me,{initialValues:{},onFinish:function(){var m=(0,I.Z)(x().mark(function v(h){return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Se(h);case 2:case"end":return p.stop()}},v)}));return function(v){return m.apply(this,arguments)}}(),children:[(0,i.jsxs)("div",{className:O().title,children:[(0,i.jsx)("img",{alt:"logo",src:"/logo.svg"})," \u5B34\u5F7B\u8FD0\u529B\u5E73\u53F0"]}),Me&&(0,i.jsx)(ye,{content:j.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Z,{name:"phone",fieldProps:{size:"large",prefix:(0,i.jsx)(ae.Z,{className:O().prefixIcon})},placeholder:j.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D/\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,i.jsx)(y._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D/\u624B\u673A\u53F7!"})}]}),(0,i.jsx)(z.Z.Password,{name:"pwd",fieldProps:{size:"large",prefix:(0,i.jsx)(ee,{className:O().prefixIcon})},placeholder:j.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,i.jsx)(y._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,i.jsxs)(Q.Z,{children:[(0,i.jsx)($.Z,{span:14,children:(0,i.jsx)(z.Z,{name:"vercode",fieldProps:{size:"large",prefix:(0,i.jsx)(ne,{})},placeholder:"\u56FE\u5F62\u9A8C\u8BC1\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801!"}]})}),(0,i.jsx)($.Z,{span:10,children:(0,i.jsx)("img",{className:O().codeImg,src:P,onClick:function(){return s(F())}})})]})]})]})})]})},je=Oe}}]);
